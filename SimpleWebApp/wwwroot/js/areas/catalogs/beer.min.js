var Beer=function(){var n="/Catalogs/Beer/",i="#gridBeer ",r="#BeerValidator",t=null,u={bServerSide:!0,bFilter:!1,ordering:!0,info:!1,processing:!0,scrollX:!0,scrollY:450,paging:!1,ajax:{url:n+"GetListBeers",type:"POST",dataSrc:"data",dataType:"json",data:function(n){var t={Name:$("#divFilters #NameFilter").val(),Brand:$("#divFilters #BrandFilter").val()};return n.filters=t,n}},columns:[{data:"id",autoWidth:!0,title:"id",visible:!1},{data:"name",autoWidth:!0,title:"Name"},{data:"brand",autoWidth:!0,title:"Brand"},{data:"alcohol",autoWidth:!0,title:"Alcohol"},{title:"Actions",action:0,autoWidth:!0,bSearchable:!1,bSortable:!1,"class":"text-center dt-center td-actions",render:function(n,t,i){var r="";return r+='<a href="javascript: Beer.OpenModalForm('+i.id+');" class="btn btn-primary btn-outline btn-sm" title="Edit"><span class="fa fa-pencil"><\/span><\/a>',r+('<a href="javascript: Beer.ConfirmDelete('+i.id+');" class="btn btn-danger btn-outline btn-sm" title="Delete" style="margin-left:16px !important;"><span class="fa fa-trash"><\/span><\/a>')}}]},f=function(){var t=$("#BeerForm")[0],i=new FormData(t);$.ajax({url:n+"Save",data:i,processData:!1,contentType:!1,dataType:"JSON",type:"POST",beforeSend:function(){Site.beforeRequest()},complete:function(){Site.completeRequest();Beer.Search()},error:function(n){console.log(n);Toast.error("error",n.status+" - "+n.statusText)},success:function(n){if(n.status===ResponseStatus.ERROR)Toast.error(n.status,n.message+"<br/>"+n.details);else if(n.status===ResponseStatus.FATAL_ERROR)Toast.fatalError(n.status,n.message+"<br/>"+n.details);else{if(n.status===ResponseStatus.WARNING){Site.showValidatorErrors(r,n.data);return}n.status===ResponseStatus.SUCCESS&&Toast.success(n.status,n.message)}AppModal.hide()}})},e=function(t){$.ajax({url:n+"Delete/"+t,processData:!1,contentType:!1,type:"POST",beforeSend:function(){Site.beforeRequest()},complete:function(){Site.completeRequest();Beer.Search()},error:function(n){Toast.error("error",n.status+" - "+n.statusText);AppModal.hide()},success:function(n){n.status===ResponseStatus.ERROR?Toast.error(n.status,n.message+"<br/>"+n.details):n.status===ResponseStatus.FATAL_ERROR?Toast.fatalError(n.status,n.message+"<br/>"+n.details):Toast.success(n.status,n.message);AppModal.hide()}})};return{Init:function(){t=$(i).DataTable(u);$("table.table thead tr th").addClass("table-light")},Search:function(){t.draw()},ClearFilter:function(){$("#divFilters #NameFilter").val("");$("#divFilters #BrandFilter").val("")},OpenModalForm:function(t){let i=t===null||t===0?"":"?id="+t,r=t===null||t===0?"New Beer":"Edit Beer",u={appModaSize:AppModalSizes.DEFAULT,url:n+"Form"+i,title:r,bodyHtml:"",scroll:!0,actions:[{name:"Cancel",type:ModalTypeActions.CLOSE_MODAL},{name:"Save",type:ModalTypeActions.SUCCESS,onClickFunction:function(){f()}}],onCreateModalFunction:function(){},onCloseModalFunction:function(){}};AppModal.show(u)},ConfirmDelete:function(n){let t={appModaSize:AppModalSizes.SMALL,title:"Confirm Action",message:"Are you sure you want to delete this?",actions:[{name:"Cancel",type:ModalTypeActions.CANCEL_CONFIRM_MODAL},{name:"Yes",type:ModalTypeActions.SUCCESS,onClickFunction:function(){e(n)}},],onCreateModalFunction:function(){},onCloseModalFunction:function(){}};AppModal.confirmModal(t)}}}();$(document).ready(function(){Beer.Init()});